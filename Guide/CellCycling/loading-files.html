
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Basic file loading operations &#8212; GES-echem-suite Documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Accessing and computing properities" href="accessing-data.html" />
    <link rel="prev" title="The cellcycling module" href="../cell-cycling.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../intro.html">
<p class="title">Python</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting-started.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../user-guide.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api.html">
  API Documentation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../contributor-guide.html">
  Contributor’s guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../release-notes.html">
  Release notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../cell-cycling.html">
   The
   <code class="docutils literal notranslate">
    <span class="pre">
     cellcycling
    </span>
   </code>
   module
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Basic file loading operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="accessing-data.html">
     Accessing and computing properities
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-data-from-a-bytesio-bytestream">
   Loading data from a BytesIO bytestream
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="basic-file-loading-operations">
<span id="cellcycling-loading"></span><h1>Basic file loading operations<a class="headerlink" href="#basic-file-loading-operations" title="Permalink to this headline">#</a></h1>
<p>The core of all the data-loading operations is the <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> class defined in the <code class="docutils literal notranslate"><span class="pre">read_input</span></code> submodule. The <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> class can load both <code class="docutils literal notranslate"><span class="pre">.DTA</span></code> and <code class="docutils literal notranslate"><span class="pre">.mpt</span></code> files generated respectively by the GAMRY and BIOLOGIC potentiostats. The class provides a simple interface to automatically parse all the loaded data and hold them in memory in the form of bytestreams. To show how this object can be operated let us consider the case of a <code class="docutils literal notranslate"><span class="pre">.mpt</span></code> file that, for the purposes of this example, is provided in the documentation folder. Let us look at the content of such file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./example.mpt&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>...
Acquisition started on : 25/12/2022 13:00:00
...
Number of loops : 2
Loop 0 from point number 0 to 5
Loop 1 from point number 6 to 11

mode	ox/red	error	control changes	time/s	control/V/mA	Ewe/V	I/mA	dq/mA.h	(Q-Qo)/mA.h	Q charge/discharge/mA.h	Ece/V	P/W	Q discharge/mA.h	Q charge/mA.h	Capacity/mA.h	control/V	control/mA	Ewe-Ece/V	
1	1	0	1	1,000000000000000E+002	8,0000000E+002	1,0000000E+000	8,0000000E+002	4,000000000000000E+000	1,100000000000000E+003	1,100000000000000E+003	3,0000000E-006	1,0000000E+000	0,000000000000000E+000	1,000000000000000E+003	1,000000000000000E+003	0,0000000E+000	8,0000000E+002	1,0000000E+000
1	1	0	1	1,010000000000000E+002	8,0000000E+002	1,1000000E+000	8,0000000E+002	4,000000000000000E+000	1,100000000000000E+003	1,100000000000000E+003	3,0000000E-006	1,0000000E+000	0,000000000000000E+000	1,000000000000000E+003	1,000000000000000E+003	0,0000000E+000	8,0000000E+002	1,0000000E+000
1	1	0	1	1,020000000000000E+002	8,0000000E+002	1,2000000E+000	8,0000000E+002	4,000000000000000E+000	1,100000000000000E+003	1,100000000000000E+003	3,0000000E-006	1,0000000E+000	0,000000000000000E+000	1,000000000000000E+003	1,000000000000000E+003	0,0000000E+000	8,0000000E+002	1,0000000E+000
1	0	0	0	1,030000000000000E+002	-8,0000000E+002	9,0000000E-001	-8,0000000E+002	-4,000000000000000E-005	1,100000000000000E+003	-4,000000000000000E-005	-8,0000000E-004	-4,0000000E-001	5,000000000000000E-005	0,000000000000000E+000	5,000000000000000E-005	0,0000000E+000	-8,0000000E+002	6,0000000E-001
1	0	0	0	1,040000000000000E+002	-8,0000000E+002	8,5000000E-001	-8,0000000E+002	-4,000000000000000E+000	1,100000000000000E+003	-4,000000000000000E+000	-8,0000000E-005	-4,0000000E-001	5,000000000000000E+000	0,000000000000000E+000	5,000000000000000E+000	0,0000000E+000	-8,0000000E+002	6,0000000E-001
1	0	0	0	1,050000000000000E+002	-8,0000000E+002	8,2000000E-001	-8,0000000E+002	-4,000000000000000E+000	1,100000000000000E+003	-4,000000000000000E+000	-8,0000000E-004	-4,0000000E-001	5,000000000000000E+000	0,000000000000000E+000	5,000000000000000E+000	0,0000000E+000	-8,0000000E+002	6,0000000E-001
1	1	0	1	1,060000000000000E+002	8,0000000E+002	1,0000000E+000	8,0000000E+002	4,000000000000000E+000	1,100000000000000E+003	1,100000000000000E+003	3,0000000E-006	1,0000000E+000	0,000000000000000E+000	1,000000000000000E+003	1,000000000000000E+003	0,0000000E+000	8,0000000E+002	1,0000000E+000
1	1	0	1	1,070000000000000E+002	8,0000000E+002	1,0500000E+000	8,0000000E+002	4,000000000000000E+000	1,100000000000000E+003	1,100000000000000E+003	3,0000000E-006	1,0000000E+000	0,000000000000000E+000	1,000000000000000E+003	1,000000000000000E+003	0,0000000E+000	8,0000000E+002	1,0000000E+000
1	1	0	1	1,080000000000000E+002	8,0000000E+002	1,1500000E+000	8,0000000E+002	4,000000000000000E+000	1,100000000000000E+003	1,100000000000000E+003	3,0000000E-006	1,0000000E+000	0,000000000000000E+000	1,000000000000000E+003	1,000000000000000E+003	0,0000000E+000	8,0000000E+002	1,0000000E+000
1	0	0	0	1,090000000000000E+002	-8,0000000E+002	8,9000000E-001	-8,0000000E+002	-4,000000000000000E-005	1,100000000000000E+003	-4,000000000000000E-005	-8,0000000E-004	-4,0000000E-001	5,000000000000000E-005	0,000000000000000E+000	5,000000000000000E-005	0,0000000E+000	-8,0000000E+002	6,0000000E-001
1	0	0	0	1,100000000000000E+002	-8,0000000E+002	8,4000000E-001	-8,0000000E+002	-4,000000000000000E+000	1,100000000000000E+003	-4,000000000000000E+000	-8,0000000E-005	-4,0000000E-001	5,000000000000000E+000	0,000000000000000E+000	5,000000000000000E+000	0,0000000E+000	-8,0000000E+002	6,0000000E-001
1	0	0	0	1,110000000000000E+002	-8,0000000E+002	8,0000000E-001	-8,0000000E+002	-4,000000000000000E+000	1,100000000000000E+003	-4,000000000000000E+000	-8,0000000E-004	-4,0000000E-001	5,000000000000000E+000	0,000000000000000E+000	5,000000000000000E+000	0,0000000E+000	-8,0000000E+002	6,0000000E-001
</pre></div>
</div>
</div>
</div>
<p>As it can be seen, the provided file describes: two full charge/discharge cycles, each of wich composed by two halfcycle, each of which composed by 3 time-steps.</p>
<p>To load this <code class="docutils literal notranslate"><span class="pre">.mpt</span></code> file using the <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> class, the following procedure can be used:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loading the FileManager class from the cellcycling.read_input module</span>
<span class="kn">from</span> <span class="nn">echemsuite.cellcycling.read_input</span> <span class="kn">import</span> <span class="n">FileManager</span>

<span class="c1"># Creating an instance of the FileManager class</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Loading all the .mpt file in the current folder</span>
<span class="n">manager</span><span class="o">.</span><span class="n">fetch_from_folder</span><span class="p">(</span><span class="s2">&quot;./&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.mpt&quot;</span><span class="p">)</span>   
</pre></div>
</div>
</div>
</div>
<p>After the call to the <code class="docutils literal notranslate"><span class="pre">fetch_from_folder</span></code> function, all the data has been loaded in the class and parsed in single independent half-cycles.</p>
<div class="admonition-loading-files-manually admonition">
<p class="admonition-title">Loading files manually</p>
<p>Please notice how the user can also manually specify a list of files to be loaded by using the function <code class="docutils literal notranslate"><span class="pre">fetch_files</span></code> according to the syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">()</span>
<span class="n">manager</span><span class="o">.</span><span class="n">fetch_files</span><span class="p">([</span><span class="s2">&quot;./example.mpt&quot;</span><span class="p">])</span> 
</pre></div>
</div>
<p>Please notice how in this case the file extension is automatically detected from the filenames contained in the list. As such the extension must be available and omogeneous between the various files in the list.</p>
</div>
<p>Considering that in the previous example we have loaded a single <code class="docutils literal notranslate"><span class="pre">.mpt</span></code> file, the half-cycle ordering is unambiguos and the parsed data can immediately be converted into the corresponding <code class="docutils literal notranslate"><span class="pre">Cycle</span></code> and <code class="docutils literal notranslate"><span class="pre">CellCycling</span></code> objects by using the built-in <code class="docutils literal notranslate"><span class="pre">get_cycles</span></code> and <code class="docutils literal notranslate"><span class="pre">get_cellcycling</span></code> class methods:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obtain the cellcycling object from the manager</span>
<span class="n">cellcycling</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_cellcycling</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cellcycling</span><span class="p">)</span>

<span class="c1"># Obtain the list of cycle objects from the manager</span>
<span class="n">cycle_list</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_cycles</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cycle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;echemsuite.cellcycling.cycles.CellCycling at 0x7f2b749efe50&gt;
    ├─ total number of cycles:    2
    ├─ number of visible cycles:  2
    └─ reference cycle:           0

&lt;echemsuite.cellcycling.cycles.Cycle at 0x7f2b749eff70&gt;
    ├─ number:     0
    ├─ halfcycles: Both charge and discharge
    └─ hidden:     False
</pre></div>
</div>
</div>
</div>
<p>If the cell-cycling data is instead loaded from a set of <code class="docutils literal notranslate"><span class="pre">.DTA</span></code> files, either complete or partial, the ordering of the half-cycles is not strictly encoded by the data available to the <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> and, as such, user intervention may be needed. The <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> will try to automatically generate a suggested ordering of the half-cycle files based on their timestamp and type. The suggested ordering can be obtained by calling the memeber function <code class="docutils literal notranslate"><span class="pre">suggest_ordering</span></code> that will return a list of lists containing the name of the loaded files. Each list-type entry represents a half-cycle level; lists with more than one element will represent partial half-cycle files to be merged. As an example consider the followiing list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s2">&quot;Charge_1.DTA&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Charge_2.DTA&quot;</span><span class="p">,</span> <span class="s2">&quot;Charge_2b.DTA&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Charge_3.DTA&quot;</span><span class="p">]]</span>
</pre></div>
</div>
<p>this list represents an ordering that will generate 3 half-cycles in which the middle one will be generated from the merging of <code class="docutils literal notranslate"><span class="pre">Charge_2.DTA</span></code> and <code class="docutils literal notranslate"><span class="pre">Charge_2b.DTA</span></code>. The user can either accept the automatically generated ordering or can manually specify its own. The selected ordering can then be applyed by passing it explicitly to the <code class="docutils literal notranslate"><span class="pre">get_cycles</span></code> and <code class="docutils literal notranslate"><span class="pre">get_cellcycling</span></code> functions as the keyworded argument <code class="docutils literal notranslate"><span class="pre">custom_order</span></code>.</p>
<p>To better show how this can be done, let us consider the following example in which two partial <code class="docutils literal notranslate"><span class="pre">.DTA</span></code> halfcycle charge files are provided, together with a complete discharge halfcycle file, to the file-manager.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">echemsuite.cellcycling.read_input</span> <span class="kn">import</span> <span class="n">FileManager</span>
<span class="kn">from</span> <span class="nn">echemsuite.cellcycling.cycles</span> <span class="kn">import</span> <span class="n">Cycle</span>

<span class="c1"># Define the path to the folder holding the files</span>
<span class="n">folder</span> <span class="o">=</span> <span class="s2">&quot;./example_partial_DTA&quot;</span>

<span class="c1"># Print a list of the available files</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Available files: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)])</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Load and parse the .DTA files contained in the &quot;my_folder&quot; directory</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">()</span>
<span class="n">manager</span><span class="o">.</span><span class="n">fetch_from_folder</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;.DTA&quot;</span><span class="p">)</span>

<span class="c1"># Print a list of the loaded halfcycles</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loaded halfcycles datasets:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">manager</span><span class="o">.</span><span class="n">halfcycles</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">: (</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">halfcycle_type</span><span class="si">}</span><span class="s2">) </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="c1"># Print the suggested ordering of the loaded-halfcycles</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ordering suggested by the FileManager object:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">manager</span><span class="o">.</span><span class="n">suggest_ordering</span><span class="p">())</span>

<span class="c1"># Plotting the result obtained by concatenating the data according to the suggested ordering</span>
<span class="c1"># and according to a user-specified ordering</span>

<span class="n">suggested</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_cellcycling</span><span class="p">()</span>
<span class="n">custom</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_cellcycling</span><span class="p">(</span><span class="n">custom_order</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;charge_1b.DTA&#39;</span><span class="p">,</span> <span class="s1">&#39;charge_1.DTA&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;discharge_1.DTA&#39;</span><span class="p">]]</span> <span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">suggested</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">charge</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">suggested</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">charge</span><span class="o">.</span><span class="n">voltage</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;suggested&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">custom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">charge</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">custom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">charge</span><span class="o">.</span><span class="n">voltage</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Voltage (V)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;#DDDDDD&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ordering&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Available files: discharge_1.DTA, charge_1.DTA, charge_1b.DTA

Loaded halfcycles datasets:
2022-07-24 00:23:03: (discharge) discharge_1.DTA
2022-07-23 20:25:33: (charge) charge_1.DTA
2022-07-23 20:28:33: (charge) charge_1b.DTA

Ordering suggested by the FileManager object:
[[&#39;charge_1.DTA&#39;, &#39;charge_1b.DTA&#39;], [&#39;discharge_1.DTA&#39;]]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7f2b3db54760&gt;
</pre></div>
</div>
<img alt="../../_images/loading-files_7_2.png" src="../../_images/loading-files_7_2.png" />
</div>
</div>
<section id="loading-data-from-a-bytesio-bytestream">
<h2>Loading data from a BytesIO bytestream<a class="headerlink" href="#loading-data-from-a-bytesio-bytestream" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">read_input</span></code> sub-module has been developed to also operate in a web-application environment minimizing the I/O calls done on local copies of the loaded files. For this reason, all the loaded files are immediately converted into binary bytestreams and saved in a <code class="docutils literal notranslate"><span class="pre">bytestrem</span></code> dictionary saved in memory. By taking advantage of this behavior, a parametrized <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> object can also be generated by directly setting the <code class="docutils literal notranslate"><span class="pre">bytestream</span></code> buffer via the provided setter.</p>
<p>To show how this can be done let us, first of all, define a <code class="docutils literal notranslate"><span class="pre">BytesIO</span></code> version of the <code class="docutils literal notranslate"><span class="pre">.mpt</span></code> file considered before. This can easily be done with few lines of code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the BytesIO stream object from the io module</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

<span class="c1"># Open the file and load it as a bytes stream</span>
<span class="n">my_bytestream</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;./example.mpt&quot;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">binary_file</span><span class="p">:</span>
    <span class="n">my_bytestream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">binary_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>The loaded stream can now be used to directly initialize the <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> class according to:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">echemsuite.cellcycling.read_input</span> <span class="kn">import</span> <span class="n">Instrument</span>

<span class="c1"># Create a FileManager instance</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">()</span>

<span class="c1"># Set the bytestream dictionary using the loaded data</span>
<span class="n">manager</span><span class="o">.</span><span class="n">bytestreams</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;example.mpt&quot;</span> <span class="p">:</span> <span class="n">my_bytestream</span><span class="p">}</span>
<span class="n">manager</span><span class="o">.</span><span class="n">_instrument</span> <span class="o">=</span> <span class="n">Instrument</span><span class="o">.</span><span class="n">BIOLOGIC</span>

<span class="c1"># Call the parse function</span>
<span class="n">manager</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Please observe how the <code class="docutils literal notranslate"><span class="pre">FileManager</span></code> class has no access to the file extension (the label provided here as a dictionary key was used only for clarity) and, as a direct consequence, does not know the instrument type. This requires the user to manually set the <code class="docutils literal notranslate"><span class="pre">_instrument</span></code> variable. Furthermore, unlike the previous example in which the call to the <code class="docutils literal notranslate"><span class="pre">parse</span></code> function was avoided thanks to the <code class="docutils literal notranslate"><span class="pre">autoparse</span></code> mode of the <code class="docutils literal notranslate"><span class="pre">fetch_from_folder</span></code> function, this time the call to the <code class="docutils literal notranslate"><span class="pre">parse</span></code> function must be made explicitly.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Guide/CellCycling"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../cell-cycling.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">The <code class="docutils literal notranslate"><span class="pre">cellcycling</span></code> module</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="accessing-data.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Accessing and computing properities</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>